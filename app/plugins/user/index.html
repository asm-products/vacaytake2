<link href="app/plugins/user/user.css" rel="stylesheet" />
<div ng-controller="UserListController">
	<div class="breadcrumb">
		<h1>Users</h1>
	    <div class="pull-right">
	        <a class="btn outline" ng-click="add_shortcut()">Add User</a>
	    </div>  
	</div>        	
	<div class="container-fluid">
	    <div class="row-fluid">
			<div class="well-content">
				<div>
					<table class="table">
					    <thead>
					        <tr>
					            <th>Current Users</th>
					        </tr>
					    </thead>
					    <tbody>
					        <tr ng-repeat="user in users">
					            <td>
					            	<div class="user_listing">
					            		<img class="pic" ng-src="{{user.pic || 'core/assets/photo.jpg'}}" /><br />
					            		<span class="name">{{user.name}}</span><br />
					            		<span class="pill">{{user.roleName || 'Viewer'}}</span>
					            		<span style="background-color: #3498db" ng-if="is_owner(user)" class="pill ng-binding">Owner</span>
					            		<div class="pull-right list_menu">
											<a class="narrow" ng-click="edit_user(user.id)" ng-show="user_permission=='Admin'">edit</a>
											<a class="narrow" ng-click="show_user(user.id)">show</a>
											<a class="narrow" confirm on-confirm="del_user(user.id)" ng-show="user_permission=='Admin'"><i class="icon-trash" ></i></a>
										</div>
					            	</div>
					            </td>
					        </tr>
					    </tbody>
					</table>
					
				</div>
				<div class="form modal fade nimbus_form_modal">
					<div class="modal-dialog">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" aria-hidden="true" ng-click="clear()">&times;</button>
					        <h4 class="modal-title">User Form</h4>
					      </div>
					      <div class="modal-body">
					        <model-form model-name="usermodel" form-mode="form_mode" instance-name="user_data" on-create="submit()" on-update="update()"></model-form>
					      </div>
					    </div><!-- /.modal-content -->
					</div><!-- /.modal-dialog -->
				</div>
				<div class="update_form modal fade nimbus_form_modal">
					<div class="modal-dialog">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" aria-hidden="true" ng-click="clear()">&times;</button>
					        <h4 class="modal-title">User Form</h4>
					      </div>
					      <div class="modal-body">
					        <model-form model-name="userEditModel" form-mode="form_mode" instance-name="user_data" on-create="submit()" on-update="update()"></model-form>
					      </div>
					    </div><!-- /.modal-content -->
					</div><!-- /.modal-dialog -->
				</div>
				<div class="modal fade userinfo">
					<div class="modal-dialog">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" aria-hidden="true" ng-click="clear()">&times;</button>
					        <h4 class="modal-title" >User Info</h4>
					      </div>
					      <div class="modal-body">
					        	<dl class="dl-horizontal" id="user_form">
					        		<dt>Name :<dt> 
					        		<dd>{{user_info.name}}</dd>
				        			<dt>Email : </dt><dd>{{user_info.email}}</dd>
					        	</dl>
					      </div>
					    </div><!-- /.modal-content -->
					</div><!-- /.modal-dialog -->
				</div>
			</div>
	    </div>
	</div>
</div>
